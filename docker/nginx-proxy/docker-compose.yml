version: '3'


# note: this must be started before other UIs. this nginx-proxy service does some
# magic listening to the docker socket to figure out what containers' exposed ports
# to proxy to
services:
  nginx-proxy:
    image: jwilder/nginx-proxy
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - /var/run/docker.sock:/tmp/docker.sock:ro
      - ./etc-nginx-proxy/ssl/certs/:/etc/nginx/certs
    environment:
      - 'CERT_NAME=pihome.run'
    networks:
      nginx-proxy:
        ipv4_address: 172.22.0.10

networks:
  nginx-proxy:
    name: nginx-proxy
    ipam:
      config:
        - subnet: 172.22.0.0/24
